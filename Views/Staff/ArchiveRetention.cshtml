@{
    ViewData["Title"] = "Document Archive";
}

<div class="container-fluid">
    <!-- Header -->
    <div class="d-flex justify-content-start mb-2">
        <h5 class="mb-0 text-primary fw-semibold">Document Archive</h5>
    </div>

    <div class="card shadow-sm border-0 mb-3">
        <div class="card-body">
            <!-- Search and Filter -->
            <form class="row g-2 align-items-end mb-3" method="get">
                <div class="col-md-4">
                    <label class="form-label">Search Documents</label>
                    <input type="text" class="form-control" placeholder="Enter patient name or document...">
                </div>
                <div class="col-md-3">
                    <label class="form-label">Document Type</label>
                    <select class="form-select">
                        <option value="">All Types</option>
                        <option>Medical Records</option>
                        <option>Lab Results</option>
                        <option>Prescriptions</option>
                        <option>Imaging</option>
                        <option>Insurance</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label class="form-label">Status</label>
                    <select class="form-select">
                        <option value="">All Status</option>
                        <option>Ready to Archive</option>
                        <option>Recently Archived</option>
                    </select>
                </div>
                <div class="col-md-2">
                    <button type="submit" class="btn btn-secondary me-2">Filter</button>
                    <button type="reset" class="btn btn-outline-secondary">Reset</button>
                </div>
            </form>

            <!-- Documents Ready for Archive -->
            <h6 class="fw-semibold text-primary mb-3">Documents Ready for Archive</h6>
            <div class="table-responsive mb-4">
                <table class="table table-striped table-hover align-middle mb-0">
                    <thead class="table-header-ocean">
                        <tr>
                            <th style="width: 22%;">Patient Name</th>
                            <th style="width: 12%;">Patient ID</th>
                            <th style="width: 20%;">Document</th>
                            <th style="width: 12%;">Last Accessed</th>
                            <th style="width: 10%;">Age</th>
                            <th style="width: 24%;">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <div class="fw-semibold">Alice Brown</div>
                            </td>
                            <td>P-2023-0892</td>
                            <td>Annual Physical 2023</td>
                            <td>Oct 15, 2023</td>
                            <td>1 year</td>
                            <td>
                                <button class="btn btn-sm btn-outline-secondary me-1" data-bs-toggle="modal" data-bs-target="#viewArchiveModal">View</button>
                                <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#archiveDocumentModal">Archive Now</button>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="fw-semibold">Charles Johnson</div>
                            </td>
                            <td>P-2023-1056</td>
                            <td>Blood Test - March 2023</td>
                            <td>Mar 22, 2023</td>
                            <td>1.5 years</td>
                            <td>
                                <button class="btn btn-sm btn-outline-secondary me-1" data-bs-toggle="modal" data-bs-target="#viewArchiveModal">View</button>
                                <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#archiveDocumentModal">Archive Now</button>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="fw-semibold">Diana Lee</div>
                            </td>
                            <td>P-2022-1458</td>
                            <td>Prescription - 2022</td>
                            <td>Aug 5, 2022</td>
                            <td>2+ years</td>
                            <td>
                                <button class="btn btn-sm btn-outline-secondary me-1" data-bs-toggle="modal" data-bs-target="#viewArchiveModal">View</button>
                                <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#archiveDocumentModal">Archive Now</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Recently Archived -->
            <h6 class="fw-semibold text-primary mb-3">Recently Archived</h6>
            <div class="table-responsive">
                <table class="table table-striped table-hover align-middle mb-0">
                    <thead class="table-light">
                        <tr>
                            <th style="width: 22%;">Patient Name</th>
                            <th style="width: 12%;">Patient ID</th>
                            <th style="width: 20%;">Document</th>
                            <th style="width: 16%;">Archived Date</th>
                            <th style="width: 14%;">Archived By</th>
                            <th style="width: 16%;">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <div class="fw-semibold">Edward Wilson</div>
                            </td>
                            <td>P-2023-0678</td>
                            <td>X-Ray - Chest PA</td>
                            <td>Feb 10, 2024</td>
                            <td>staff@dms.com</td>
                            <td>
                                <button class="btn btn-sm btn-outline-secondary me-1" data-bs-toggle="modal" data-bs-target="#viewArchiveModal">View</button>
                                <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#restoreDocumentModal">Restore</button>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="fw-semibold">Fiona Taylor</div>
                            </td>
                            <td>P-2023-0923</td>
                            <td>Insurance Claim Q3 2023</td>
                            <td>Feb 8, 2024</td>
                            <td>staff@dms.com</td>
                            <td>
                                <button class="btn btn-sm btn-outline-secondary me-1" data-bs-toggle="modal" data-bs-target="#viewArchiveModal">View</button>
                                <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#restoreDocumentModal">Restore</button>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="fw-semibold">George Miller</div>
                            </td>
                            <td>P-2023-0567</td>
                            <td>Vaccination Record 2023</td>
                            <td>Feb 5, 2024</td>
                            <td>staff@dms.com</td>
                            <td>
                                <button class="btn btn-sm btn-outline-secondary me-1" data-bs-toggle="modal" data-bs-target="#viewArchiveModal">View</button>
                                <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#restoreDocumentModal">Restore</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Pagination -->
            <nav class="mt-3">
                <ul class="pagination pagination-sm mb-0">
                    <li class="page-item disabled">
                        <a class="page-link" href="#" tabindex="-1">Previous</a>
                    </li>
                    <li class="page-item active"><a class="page-link" href="#">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item">
                        <a class="page-link" href="#">Next</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</div>

<!-- View Archive Modal -->
<div class="modal fade" id="viewArchiveModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Document Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="row g-3">
                    <div class="col-6">
                        <small class="text-muted d-block">Patient</small>
                        <div class="fw-semibold">Alice Brown</div>
                        <small class="text-muted">P-2023-0892</small>
                    </div>
                    <div class="col-6">
                        <small class="text-muted d-block">Document</small>
                        <div class="fw-semibold">Annual Physical 2023</div>
                    </div>
                    <div class="col-6">
                        <small class="text-muted d-block">Created</small>
                        <div>Oct 15, 2023</div>
                    </div>
                    <div class="col-6">
                        <small class="text-muted d-block">Last Accessed</small>
                        <div>Oct 15, 2023</div>
                        <small class="text-muted">120 days ago</small>
                    </div>
                </div>
                <div class="alert alert-light border mt-3">
                    <small>This document has not been accessed for 120 days and meets criteria for archival.</small>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#archiveDocumentModal">Archive Now</button>
            </div>
        </div>
    </div>
</div>

<!-- Archive Document Modal -->
<div class="modal fade" id="archiveDocumentModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Archive Document</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="alert alert-light border mb-3">
                    <small>You are about to archive <strong>1 document</strong>. This will be moved to archive storage.</small>
                </div>
                <div class="mb-3">
                    <label class="form-label">Archive Reason (Optional)</label>
                    <select class="form-select">
                        <option value="">Select reason...</option>
                        <option>Document older than retention period</option>
                        <option>Patient request</option>
                        <option>Administrative cleanup</option>
                    </select>
                </div>
                <div class="mb-0">
                    <label class="form-label">Notes</label>
                    <textarea class="form-control" rows="2"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary">Confirm Archive</button>
            </div>
        </div>
    </div>
</div>

<!-- Restore Document Modal -->
<div class="modal fade" id="restoreDocumentModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Restore Document</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="alert alert-light border mb-3">
                    <small>Restore this document to active records?</small>
                </div>
                <div class="card border-0 bg-light mb-3">
                    <div class="card-body py-2">
                        <h6 class="fw-semibold mb-1">X-Ray - Chest PA</h6>
                        <small class="text-muted">Patient: Edward Wilson (P-2023-0678)</small>
                    </div>
                </div>
                <div class="mb-0">
                    <label class="form-label">Reason for Restoration (Optional)</label>
                    <textarea class="form-control" rows="2"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary">Restore</button>
            </div>
        </div>
    </div>
</div>
